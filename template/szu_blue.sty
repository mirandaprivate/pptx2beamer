\RequirePackage{tikz}
\RequirePackage{graphicx}

\mode<presentation>

\newif\ifbeamer@secheader
\beamer@secheaderfalse

%\DeclareOptionBeamer{secheader}{\beamer@secheadertrue}
\ProcessOptionsBeamer

\useoutertheme[footline=authorinstitutetitle,subsection=false]{smoothbars}
\makeatletter % [add curpage/total page at the bottom](http://tex.stackexchange.com/questions/100838/beamer-dresden-theme-miniframes-appeareance-and-frame-number-insertion)
\newcommand{\frameofframes}{/}
\newcommand{\setframeofframes}[1]{\renewcommand{\frameofframes}{#1}}
\setbeamertemplate{footline} 
  {%
    \begin{beamercolorbox}[colsep=1.5pt]{upper separation line foot}
    \end{beamercolorbox}
    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
      leftskip=.3cm,rightskip=.3cm plus1fil]{author in head/foot}%
      \leavevmode{\usebeamerfont{author in head/foot}\insertshortauthor}%
      \hfill%
      {\usebeamerfont{institute in head/foot}\usebeamercolor[fg]{institute in head/foot}\insertshortinstitute}%
    \end{beamercolorbox}%
    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
      leftskip=.3cm,rightskip=.3cm plus1fil]{title in head/foot}%
      {\usebeamerfont{title in head/foot}\insertshorttitle}%
      \hfill%
      {\usebeamerfont{frame number}\usebeamercolor[fg]{frame number}\insertframenumber~\frameofframes~\inserttotalframenumber}
    \end{beamercolorbox}%
    \begin{beamercolorbox}[colsep=1.5pt]{lower separation line foot}
    \end{beamercolorbox}
  }
\makeatother

\useinnertheme{circles}

%\useoutertheme{default}
%\useinnertheme[shadow=true]{rounded}


\xdefinecolor{szu}{rgb}{0.523,0.125,0.254}  %RGB 134,32,65
\xdefinecolor{swift}{rgb}{0.121,0.3125,0.6016}  %RGB 31,80,154
\xdefinecolor{swift_darkblue}{rgb}{0.0898,0.1875,0.3672}  %RGB 23,48,94
\xdefinecolor{swift_lightblue}{rgb}{0.2344,0.5586,0.797} %RGB 60 143 204
\setbeamercolor{footline}{bg=swift}
\setbeamercolor{frametitle}{bg=swift,fg=white}
\setbeamercolor{title}{bg=swift}
\setbeamerfont{frametitle}{size=\large}
%\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{bibliography item}[text]
\setbeamertemplate{caption}[numbered]

\setbeamercolor{palette primary}{use=structure,fg=white,bg=structure.fg}
\setbeamercolor{palette secondary}{use=structure,fg=white,bg=structure.fg!75!black}
\setbeamercolor{palette tertiary}{use=structure,fg=white,bg=structure.fg!50!black}
\setbeamercolor{palette quaternary}{fg=white,bg=szu}
%\setbeamercolor*{sidebar}{use=structure,bg=structure.fg}
\setbeamercolor{titlelike}{parent=palette primary}

%% try
\setbeamercolor{block title}{bg=swift,fg=white}
\setbeamercolor*{block title example}{use={normal text,example text},bg=white,fg=swift}
\setbeamercolor{fine separation line}{}
\setbeamercolor{item projected}{fg=white}
\setbeamercolor{palette sidebar primary}{use=normal text,fg=normal text.fg}
\setbeamercolor{palette sidebar quaternary}{use=structure,fg=structure.fg}
\setbeamercolor{palette sidebar secondary}{use=structure,fg=structure.fg}
\setbeamercolor{palette sidebar tertiary}{use=normal text,fg=normal text.fg}
%\setbeamercolor{palette sidebar quaternary}{fg=white}
\setbeamercolor{section in sidebar}{fg=brown}
\setbeamercolor{section in sidebar shaded}{fg=grey}
\setbeamercolor{separation line}{}
\setbeamercolor{sidebar}{bg=swift}
\setbeamercolor{sidebar}{parent=palette primary}
\setbeamercolor{structure}{fg=swift}
\setbeamercolor{subsection in sidebar}{fg=brown}
\setbeamercolor{subsection in sidebar shaded}{fg=grey}
\makeatletter
\defbeamertemplate*{title page}{szu}{
  \begin{tikzpicture}[remember picture,overlay]
    \node[anchor=center] at (current page.center)
      {\includegraphics[width=\paperwidth,height=\paperheight]{../pic/titlepage.jpeg}};
  \end{tikzpicture}
  \vbox{}
  \begin{center}
    {\usebeamerfont{title}\inserttitle\par}
    \ifx\insertsubtitle\@empty\else{\usebeamerfont{subtitle}\insertsubtitle\par}\fi
    \vspace{1em}
    {\usebeamerfont{author}\insertauthor\par}
    {\usebeamerfont{institute}\insertinstitute\par}
    {\usebeamerfont{date}\insertdate\par}
  \end{center}
}
\setbeamertemplate{title page}[szu]
\makeatother
\makeatletter
\setbeamertemplate{background canvas}{
  \ifnum\insertframenumber>1\relax
    \begin{tikzpicture}[remember picture,overlay]
      \node[anchor=center] at (current page.center)
        {\includegraphics[width=\paperwidth,height=\paperheight]{../pic/swift_background.jpeg}};
    \end{tikzpicture}
  \fi
}
\makeatother
\AtBeginSection[]{
	\begin{frame}
		\tableofcontents[sectionstyle=show/shaded,subsectionstyle=show/shaded/hide,subsubsectionstyle=show/shaded/hide]
	\end{frame}
}
\AtBeginSubsection[]{
	\begin{frame}
		\tableofcontents[sectionstyle=show/shaded,subsectionstyle=show/shaded/hide,subsubsectionstyle=show/shaded/hide]
	\end{frame}
}
% %background
% \setbeamertemplate{background canvas}{
%     \begin{tikzpicture}
%     \path (0,0) -- (\paperwidth,\paperheight);
%     \node[opacity=.03] at (0.65\paperwidth,0.35\paperheight)
%     {\includegraphics[width=11cm]{pic/background.png}};
%     \end{tikzpicture}
% }
\mode
<all>

\setbeamertemplate{itemize item}[circle]       % 第一层圆点
\setbeamertemplate{itemize subitem}[square]  % 第二层方块
\setbeamertemplate{itemize subsubitem}[checkmark] % 第三层对号